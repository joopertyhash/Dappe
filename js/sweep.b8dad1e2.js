(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sweep"],{"0d4d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("numpad",{staticClass:"mb-2",attrs:{currencies:t.currencies,initialAmount:t.payment.amount,initialRate:t.rate},on:{done:function(e){return t.$emit("done")},input:t.updateAmount}}),a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"black--text flex-grow-1",attrs:{color:"primary",dark:""},on:{click:function(e){return t.$emit("done")}}},[a("v-icon",{staticClass:"mr-1"},[t._v("check")]),a("span",[t._v("Done")])],1)],1)],1)},n=[],i=a("7ffd"),c=a("7628"),r={components:{Numpad:c["a"]},computed:{currency:Object(i["e"])("currency"),rate:Object(i["c"])("rate"),currencies(){let t=this.user;return"BTC"===t.account.ticker?[...t.currencies,"SAT","BTC"]:[t.account.ticker]},payment:Object(i["c"])("payment"),user:Object(i["c"])("user")},methods:{updateAmount(t,e,a){this.payment.amount=t,this.payment.fiatAmount=e,this.currency=a}}},o=r,l=a("2877"),u=a("6544"),d=a.n(u),p=a("8336"),m=a("132d"),h=Object(l["a"])(o,s,n,!1,null,null,null);e["a"]=h.exports;d()(h,{VBtn:p["a"],VIcon:m["a"]})},1681:function(t,e,a){},"235b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.payment.sent?a("sent"):a("div",[a("h1",[t._v("Sweep Funds")]),t.editing?t._e():a("v-card",{staticClass:"mb-2"},[a("v-card-text",{staticClass:"text-center"},[a("div",{staticClass:"display-2 font-weight-black white--text"},[t._v(" "+t._s(t.$format(t.balance,0))+" "),a("span",[t._v("SAT")]),a("div",{staticClass:"fiat yellow--text display-1 my-auto"},[t._v(" "+t._s(t.fiat)+" "+t._s(t.user.currency)+" ")])]),t.pending?a("div",{staticClass:"red--text"},[a("span",{staticClass:"display-1 font-weight-black"},[t._v(t._s(t.$format(t.pending))+" ")]),a("span",{staticClass:"headline"},[t._v("UNCONFIRMED")])]):t._e(),t.show?a("qr",{attrs:{text:t.address}}):t._e(),a("v-textarea",{attrs:{label:"From Address",value:t.address,rows:"1","auto-grow":"",readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("v-btn",{staticClass:"ml-1",attrs:{icon:""},on:{click:t.clear}},[a("v-icon",{staticClass:"mr-1"},[t._v("clear")])],1),a("v-btn",{staticClass:"ml-1",attrs:{icon:"",text:""},on:{click:function(e){t.show=!t.show}}},[a("qrcode")],1),a("v-btn",{staticClass:"ml-1",attrs:{icon:""},on:{click:function(e){return t.copy(t.address)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("content_copy")])],1)]},proxy:!0}],null,!1,637668706)})],1)],1),t.editing?a("amount",{on:{edit:function(e){t.editing=!0},done:t.done}}):t._e(),t.payment.address?t._e():a("v-card",{staticClass:"pa-4 mb-2"},[a("v-textarea",{attrs:{label:"Recipient",rows:"1","auto-grow":""},scopedSlots:t._u([{key:"append",fn:function(){return[t.canPaste?a("v-btn",{staticClass:"mr-2 mb-2 flex-grow-1",on:{click:t.self}},[a("v-icon",{staticClass:"mr-1"},[t._v("person")]),a("span",[t._v("Self")])],1):t._e(),t.canPaste?a("v-btn",{staticClass:"mr-2 mb-2 flex-grow-1",on:{click:t.paste}},[a("v-icon",{staticClass:"mr-1"},[t._v("assignment")]),a("span",[t._v("Paste")])],1):t._e()]},proxy:!0}],null,!1,1332418353),model:{value:t.to,callback:function(e){t.to=e},expression:"to"}})],1),t.payment.address&&!t.editing?a("transaction",{attrs:{max:t.balance},on:{edit:function(e){t.editing=!0},feeRate:function(e){return t.buildSweepTx(t.address)}}}):t._e(),t.editing?t._e():a("v-btn",{attrs:{color:"green"},on:{click:t.submit}},[a("v-icon",{staticClass:"mr-1"},[t._v("send")]),a("span",[t._v("Sweep")])],1)],1)],1)},n=[],i=a("7ffd"),c=a("b59c"),r=a("7385"),o=a("59da"),l=a("0d4d"),u=a("5724"),d=a("9fd3"),p=a("3746"),m=a("6608");const h=1e8,f=o["networks"]["bitcoin"];var y={components:{Qrcode:d["a"],Qr:r["a"],Amount:l["a"],Transaction:u["a"],Sent:m["a"]},data(){return{address:"",balance:0,pending:0,editing:!1,loading:!0,show:!1,to:""}},mixins:[c["a"]],computed:{canPaste:()=>navigator.clipboard,fiat(){return(this.balance*this.rate/h).toFixed(2)},ecpair:Object(i["e"])("ecpair"),error:Object(i["e"])("error"),payment:Object(i["c"])("payment"),rate:Object(i["c"])("rate"),user:Object(i["c"])("user"),text:Object(i["c"])("text")},methods:{self(){this.to=this.user.address},buildSweepTx:Object(i["a"])("buildSweepTx"),clearPayment:Object(i["a"])("clearPayment"),clear(){this.ecpair=null,this.$go("/send")},done(){this.editing=!1,this.buildSweepTx(this.address)},async paste(){this.to=await navigator.clipboard.readText()},sweep:Object(i["a"])("sweep"),submit(){this.sweep()}},watch:{to(t){Object(p["a"])(t)&&(this.payment.address=t,this.payment.network="BTC")}},async mounted(){if(!this.ecpair||!this.ecpair.publicKey)return this.$go("/send");await this.clearPayment();let{publicKey:t}=this.ecpair,{address:e}=o["payments"].p2wpkh({pubkey:t,network:f});this.address=e;let{data:{chain_stats:{funded_txo_sum:a,spent_txo_sum:s},mempool_stats:{funded_txo_sum:n,spent_txo_sum:i}}}=await this.axios.get("/electrs/address/"+e);this.balance=a-s,this.pending=i-n,this.loading=!1}},v=y,b=a("2877"),_=a("6544"),x=a.n(_),w=a("8336"),k=a("b0af"),C=a("99d9"),g=a("132d"),j=a("a844"),T=Object(b["a"])(v,s,n,!1,null,null,null);e["default"]=T.exports;x()(T,{VBtn:w["a"],VCard:k["a"],VCardText:C["b"],VIcon:g["a"],VTextarea:j["a"]})},"3c0d":function(t,e,a){},5724:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"elevation-1 pa-4 mb-2"},[t.show?a("qr",{attrs:{text:t.recipient}}):t._e(),t.recipient?a("v-textarea",{attrs:{rows:"1",label:"Recipient",readonly:"","auto-grow":""},on:{focus:t.select},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[a("network-icon",{attrs:{network:t.payment.network}})]},proxy:!0},{key:"append",fn:function(){return[a("v-btn",{staticClass:"ml-1",attrs:{icon:""},on:{click:t.clearPayment}},[a("v-icon",{staticClass:"mr-1"},[t._v("clear")])],1),a("v-btn",{staticClass:"ml-1",attrs:{icon:"",text:""},on:{click:function(e){t.show=!t.show}}},[a("qrcode")],1),a("v-btn",{staticClass:"ml-1",attrs:{icon:""},on:{click:t.explore}},[a("v-icon",{staticClass:"mr-1"},[t._v("open_in_new")])],1),a("v-btn",{staticClass:"ml-1",attrs:{icon:""},on:{click:function(e){return t.copy(t.recipient)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("content_copy")])],1)]},proxy:!0}],null,!1,3100648249),model:{value:t.recipient,callback:function(e){t.recipient=e},expression:"recipient"}}):t._e(),"LBTC"===t.payment.network?a("v-select",{attrs:{label:"Asset",items:t.accounts},on:{input:t.changeAsset},model:{value:t.user.account_id,callback:function(e){t.$set(t.user,"account_id",e)},expression:"user.account_id"}}):t._e(),a("v-text-field",{staticClass:"amount",attrs:{label:"Amount",readonly:""},on:{click:function(e){return t.$emit("edit")}},scopedSlots:t._u([{key:"append",fn:function(){return[t.max?a("v-btn",{staticClass:"ml-1",attrs:{text:""},on:{click:t.setMax}},[t._v(" Max ")]):t._e(),a("v-btn",{staticClass:"toggle black--text mt-auto",attrs:{color:t.fiat?"yellow":"white"},on:{click:function(e){return e.preventDefault(),t.toggle(e)}}},[t._v(t._s(t.currency))]),a("v-btn",{staticClass:"ml-1",attrs:{icon:"",text:""},on:{click:function(e){return t.copy(t.displayAmount)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("content_copy")])],1)]},proxy:!0}]),model:{value:t.displayAmount,callback:function(e){t.displayAmount=e},expression:"displayAmount"}}),t.payment.address?a("v-text-field",{attrs:{loading:t.loadingFee,label:"Fee",readonly:""},on:{click:t.setFee},scopedSlots:t._u([{key:"append",fn:function(){return[a("v-btn",{staticClass:"toggle black--text mt-auto",attrs:{color:t.fiat?"yellow":"white"},on:{click:function(e){return e.preventDefault(),t.toggle(e)}}},[t._v(t._s(t.currency))]),a("v-btn",{staticClass:"ml-1",attrs:{icon:"",text:""},on:{click:function(e){return t.copy(t.displayFee)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("content_copy")])],1)]},proxy:!0}],null,!1,1243856868),model:{value:t.displayFee,callback:function(e){t.displayFee=e},expression:"displayFee"}}):t._e(),a("set-fee",{attrs:{adjusting:t.adjusting},on:{closed:function(e){return t.$emit("feeRate")}}}),t.psbt?a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"ml-auto",on:{click:function(e){return t.copy(t.psbt)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("content_copy")]),t._v(" Copy "+t._s("bitcoin"===t.payment.network?"PSBT":"PSET")+" ")],1)],1):t._e()],1)},n=[],i=a("7ffd"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"500"},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[t._v(" Fee Rate ")]),a("v-card-text",[a("v-slider",{staticClass:"align-center",attrs:{min:t.min,max:t.max,"hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[a("v-text-field",{staticClass:"mt-0 pt-0",attrs:{type:"text",suffix:"sat/kb",readonly:"","hide-details":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.close(e)}},model:{value:t.payment.feeRate,callback:function(e){t.$set(t.payment,"feeRate",e)},expression:"payment.feeRate"}})]},proxy:!0}]),model:{value:t.payment.feeRate,callback:function(e){t.$set(t.payment,"feeRate",e)},expression:"payment.feeRate"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.close}},[t._v(" ok ")])],1)],1)],1)},r=[],o={props:{adjusting:{type:Boolean}},data(){return{dialog:!1}},computed:{min(){return"BTC"===this.payment.network?1e3:100},max(){return"BTC"===this.payment.network?5e4:5e3},payment:Object(i["e"])("payment")},methods:{estimateFee:Object(i["a"])("estimateFee"),close(){this.dialog=!1,this.$emit("closed")}},watch:{adjusting(){this.dialog=!0}}},l=o,u=a("2877"),d=a("6544"),p=a.n(d),m=a("8336"),h=a("b0af"),f=a("99d9"),y=a("169a"),v=a("ba0d"),b=a("2fa4"),_=a("8654"),x=Object(u["a"])(l,c,r,!1,null,null,null),w=x.exports;p()(x,{VBtn:m["a"],VCard:h["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VDialog:y["a"],VSlider:v["a"],VSpacer:b["a"],VTextField:_["a"]});var k=a("b59c"),C=a("7aaa"),g=a("9fd3"),j=a("7385");const T=1e8,O="https://blockstream.info";var $={components:{NetworkIcon:C["a"],SetFee:w,Qr:j["a"],Qrcode:g["a"]},mixins:[k["a"]],props:{amount:{type:Number},fiatAmount:{type:String},max:{type:Number}},data(){return{asset:null,adjusting:!1,show:!1}},computed:{psbt:Object(i["c"])("psbt"),recipient(){let{address:t,payobj:e}=this.payment;return e?e.payeeNodeKey:t},accounts(){return this.user.accounts.map(t=>({text:t.name,value:t.id}))},isBtc(){return"BTC"===this.user.account.ticker},currency(){return this.isBtc?this.fiat?this.user.currency:this.user.unit:this.user.account.ticker},displayAmount(){return this.fiat?this.payment.fiatAmount:"SAT"===this.user.unit?this.payment.amount:this.$format(this.payment.amount)},displayFee(){return this.fiat?this.fiatFee:"SAT"===this.user.unit?this.fee:this.$format(this.fee,8)},fee(){return this.payment.tx?parseInt(this.payment.tx.fee*T):null},fiatFee(){return this.fee?(this.fee*this.rate/T).toFixed(2):null},fiat:Object(i["e"])("fiat"),loadingFee:Object(i["c"])("loadingFee"),payment:Object(i["e"])("payment"),rate:Object(i["c"])("rate"),user:Object(i["c"])("user")},methods:{setMax(){this.payment.amount=this.max,this.payment.fiatAmount=(this.payment.amount*this.rate/T).toFixed(2),this.$emit("feeRate")},changeAsset(t){let{asset:e}=this.user.accounts.find(e=>e.id===t);this.shiftAccount(e)},clearPayment:Object(i["a"])("clearPayment"),toggle(){"BTC"===this.user.account.ticker&&(this.fiat=!this.fiat)},explore(){this.$nextTick((function(){"bitcoin"===this.network?window.open(`${O}/address/${this.payment.address}`):window.open(`${O}/liquid/address/${this.payment.address}`)}))},select(t){t.target.readOnly||t.target.select()},setFee(){this.adjusting=!this.adjusting},shiftAccount:Object(i["a"])("shiftAccount")},mounted(){this.asset=this.user.account.id}},F=$,S=(a("d1f4"),a("132d")),A=a("b974"),B=a("a844"),V=Object(u["a"])(F,s,n,!1,null,"47b9d341",null);e["a"]=V.exports;p()(V,{VBtn:m["a"],VCard:h["a"],VIcon:S["a"],VSelect:A["a"],VTextField:_["a"],VTextarea:B["a"]})},6608:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mb-2"},[a("v-alert",{staticClass:"headline black--text text-center",attrs:{color:"yellow"}},[t._v("Sent!")]),a("div",{staticClass:"pa-4"},[a("div",{staticClass:"mb-2"},[a("div",{staticClass:"d-flex justify-center"},[a("div",{staticClass:"mr-2"},[a("span",{staticClass:"display-1"},[t._v(t._s(t.$format(t.total,t.precision)))]),t._v(" "+t._s(t.ticker)+" ")]),a("div",["BTC"===t.payment.account.ticker?a("span",{staticClass:"yellow--text"},[a("span",{staticClass:"display-1"},[t._v(t._s(t.fiat(t.total)))]),t._v(" "+t._s(t.payment.currency)+" ")]):t._e()])])]),a("div",{staticClass:"mb-4 text-center"},[a("div",{staticClass:"d-flex justify-center"},[a("div",{staticClass:"mr-2"},[a("span",{staticClass:"headline grey--text text--lighten-2"},[t._v("+ Fee: ")]),a("span",{staticClass:"display-1"},[t._v(t._s(t.fee))]),t._v(" "+t._s(t.user.unit)+" ")]),a("div",["BTC"===t.payment.account.ticker?a("span",{staticClass:"yellow--text"},[a("span",{staticClass:"display-1"},[t._v(t._s(t.fiat(t.payment.fee)))]),t._v(" "+t._s(t.payment.currency)+" ")]):t._e()])])]),a("v-btn",{staticClass:"mr-2",on:{click:t.clearPayment}},[a("v-icon",{staticClass:"mr-2"},[t._v("arrow_back")]),a("span",[t._v("Send Another")])],1),t.payment.txid?a("v-btn",{on:{click:function(e){return t.link(t.payment.txid)}}},[a("v-icon",{staticClass:"mr-2"},[t._v("open_in_new")]),a("span",[t._v("Blockchain")])],1):t._e()],1)],1)},n=[],i=a("7ffd"),c={computed:{fee(){return this.$format(this.payment.fee||0)},payment:Object(i["c"])("payment"),precision(){let{precision:t}=this.payment.account;return"BTC"===this.payment.account.ticker&&"SAT"===this.user.unit&&(t=0),t},ticker(){let{ticker:t}=this.payment.account;return"BTC"===t?this.user.unit:t},total(){let t=Math.abs(this.payment.amount);return"BTC"===this.payment.account.ticker&&(t-=this.payment.fee),t},user:Object(i["c"])("user")},methods:{clearPayment:Object(i["a"])("clearPayment"),fiat(t){return!t||isNaN(t)?"0.00":(t*this.payment.rate/1e8).toFixed(2)},link(t){let e="https://blockstream.info";window.location.href.includes("test")&&(e+="/testnet"),window.location=`${e}/tx/${t}`},snack:Object(i["a"])("snack")}},r=c,o=a("2877"),l=a("6544"),u=a.n(l),d=a("0798"),p=a("8336"),m=a("b0af"),h=a("132d"),f=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=f.exports;u()(f,{VAlert:d["a"],VBtn:p["a"],VCard:m["a"],VIcon:h["a"]})},"7aaa":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["LNBTC"===t.network?s("flash",{attrs:{fillColor:"yellow",title:"Lightning Payment"}}):"COINOS"===t.network?s("v-icon",{attrs:{color:"#ccc"}},[t._v("forward")]):"GIFT"===t.network?s("v-icon",{attrs:{color:"yellow"}},[t._v("card_giftcard")]):"BTC"===t.network?s("img",{attrs:{src:a("d706"),width:"24px",title:"Bitcoin Payment"}}):s("water",{attrs:{fillColor:"#00aaee",title:"Liquid Payment"}})],1)},n=[],i=a("1cee"),c=a("1360"),r={components:{Flash:c["a"],Water:i["a"]},props:{network:{type:String,default:"BTC"}}},o=r,l=a("2877"),u=a("6544"),d=a.n(u),p=a("132d"),m=Object(l["a"])(o,s,n,!1,null,null,null);e["a"]=m.exports;d()(m,{VIcon:p["a"]})},a844:function(t,e,a){"use strict";a("1681");var s=a("8654"),n=a("58df");const i=Object(n["a"])(s["a"]);e["a"]=i.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...s["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"},genInput(){const t=s["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){s["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},d1f4:function(t,e,a){"use strict";var s=a("3c0d"),n=a.n(s);n.a}}]);
//# sourceMappingURL=sweep.b8dad1e2.js.map